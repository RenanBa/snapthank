<script>
  function hasGetUserMedia() {
    return !!(navigator.getUserMedia || navigator.webkitGetUserMedia ||
            navigator.mozGetUserMedia || navigator.msGetUserMedia);
  }
  if (hasGetUserMedia()) {
    console.log("Good to go!");

  } else {
    console.log("FODA!");

    // alert('getUserMedia() is not supported in your browser');
  }
</script>

<div class="container">
  <!-- <div class="row"> -->
    <div class="col-md-offset-1">

      <% if current_user %>
        <div class="campaigns">
          <div class="col-sm-6 ">
            <div class="">
              <p><%= @donor.first_name %> <%= @donor.last_name %> just donated $<%= @donor.donation %> via <a href="https://impact.newstorycharity.org/campaigns/<%= @donor.campaign_slug %>"><%= @donor.campaign_name %></a> part of <%= @donor.affiliate %>.</p>
              <p>See their donation <a href="https://manage.newstorycharity.org/donations/<%= @donor.secure_id %>">here.</a></p>
            </div>
          </div><!-- col-sm-6 -->

          <div class="col-sm-4 text-center card">
            <div class="donorDiv">
              <p class="donation donor-info">Donation: $<%= @donor.donation %></p>
              <p class="donor-name donor-info">Donor's name: <%= @donor.first_name %></p>
            </div>
          </div><!-- col-sm-6 -->

          <div class="col-sm-11">
            <video autoplay id="video"></video>
            <div class="col-sm-11 pager">
              <button class="rec" id="rec" onclick="onBtnRecordClicked()">REC</button>
              <button class="stop disable-buttons" id="stop" onclick="onBtnStopClicked()">STOP</button>
              <button class="send disable-buttons" id="send" onclick='onBtnSendClicked("<%= @donor.id %>")'>SEND</button>
            </div><!-- col-sm-11 -->
          </div><!-- col-sm-11 -->
        </div><!-- campaigns -->

        <!-- MOBILE FORM -->
        <div id="" class="mobile display-none">
          <form action="/videos" method="post" enctype="multipart/form-data">
            <input id="file-input" class="buttons" type="file" name="webmasterfile" accept="video/*" capture=""><br/>
            <input class="mobile-form" type="text" name="title" value="video_<%= @donor.key %>" hidden><br/>
            <input class="mobile-form" type="text" name="description" value="SnapThank" hidden><br/>
            <input class="mobile-form" type="text" name="donor_id" value="<%= @donor.id %>" hidden><br/>
            <input id="submit" type="submit" name="upload" value="Upload">
          </form>
        </div><!-- id=mobile -->

        <div class="col-sm-11 pager">
          <iframe id="uploading" class="display-none" src="https://www.bis.org/img/uploading.gif" frameBorder="0"></iframe>
        </div> <!-- class="col-sm-11 pager -->
        <div class="col-sm-11 pager">
          <p class="sending display-none">Uploading...</p>
        </div> <!-- class="col-sm-11 pager -->
          <!-- <img id="landscape" class="display-none" src="/landscapapp.png"> -->

      <% else %>
        <!-- BEFORE LOGIN -->
        <div class="col-sm-11 pager-custom">
          <div class="card">
            <h3>Note:</h3>
            <p>To upload video to YouTube you need have Google and YouTube accounts. You also need to create a YouTube channel to upload the videos.</p>

            <div style="padding:10px;">
              <p>If you don't have Google account, please <%= link_to "click here", "https://accounts.google.com/ServiceLogin", target: :_blank %> to create a Google account and then <%= link_to "click here", "https://www.youtube.com/", target: :_blank %> to create YouTube account and channel</p>

            </div><!-- style -->
          </div><!-- card -->
        </div><!-- .col-ms-11 -->

        <!-- GOOGLE LOGIN IMAGE -->
        <div class="col-sm-11 pager-custom">
          <a href="/auth/google_oauth2"><img class="SignInGoogle" src="/signInGoogle.png"></a>
        </div><!-- .col-ms-11 -->
      <% end %>

      <div class="error-message"></div>
      <center></center>

    </div><!-- .col-md-offset-1 -->

</div><!-- .container -->
